<!DOCTYPE html>
<html>
    
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>
        </title>
        <link rel="stylesheet" href="style/jquery.mobile-1.1.1.min.css"       />
        <link rel="stylesheet" href="style/my.css" />
        
        <script src="js/jquery-1.7.2.min.js">
        </script>
        <script src="js/jquery.mobile-1.1.1.min.js">
        </script>
        <script src="js/my.js">
        </script>
        <style>
      @media screen and (orientation: landscape) {
        html, body {
          width: 100%;
        }

        .content h1.landscape { display: block }
        .content h1.portrait { display: none }
      }
      @media screen and (orientation: portrait) {
        html, body {
          width: 100%;
        }
      }
    </style>
<script>
// Below two lines are for mobile apps
tempdomain = "http://blogya.in";
temppath="/dailyquran/";
tempurl = tempdomain+temppath+"getquran.php?id="+GetID();

//tempdomain= "";
//temppath='';
//tempurl = tempdomain+temppath+"getquran.php?id="+GetID();
function loadXMLDoc()
{
var xmlhttp;
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
     	jsondata=eval ("(" + xmlhttp.responseText + ")"); 
     	document.getElementById('VerseContent').innerHTML= jsondata.VerseNumber + ') ' +jsondata.Verse;
     	//document.getElementById('VerseNumber').innerHTML=jsondata.VerseNumber;
     	document.getElementById('AudioSRC').src=jsondata.AudioSRC;     	
     	id = jsondata.id;
     	document.getElementById('AudioSRC').load();
     	document.getElementById('AudioSRC').play();
     	SetID(id);
    }
  }

xmlhttp.open("GET",tempurl,true);
xmlhttp.send();
}

function GetID(){
	if(typeof(Storage)!=="undefined")
	  {
		 if(localStorage.qcodes_verse_id){
			 return localStorage.qcodes_verse_id;
		 }else{
			localStorage.qcodes_verse_id = 1;
		 }
	  }
	else
	  {
		  alert('Local Storage is Not Found')
	  }
}
function SetID(tempid){
	if(typeof(Storage)!=="undefined")
	  {
		  localStorage.qcodes_verse_id = tempid;
	  }
	else
	  {
		  alert('Local Storage is Not Available');
	  }
}
function Prev(){
	SetID(Number(GetID())-1);
	tempurl = tempdomain+temppath+"getquran.php?id="+GetID();
	loadXMLDoc();
}
function Next(){
 	SetID(Number(GetID())+1);
 	tempurl = tempdomain+temppath+"getquran.php?id="+GetID();
	loadXMLDoc();
}
function ReSet(){
 	SetID(0);
}
function GoTo(){
	tempurl = tempdomain+temppath+"getquran.php?sura="+document.getElementById('sura').value;
	loadXMLDoc();
	
}


var handler = function(event) {
	Next();
	}
function ToggleAutoPlay(mode){
	ap = document.getElementById('autoplay');
	
	as = document.getElementById('AudioSRC');
	if(mode == 1){
	 	as.addEventListener('ended', handler, false);     		
	 	ap.disabled=true;
	}else{
		as.removeEventListener('ended', handler, false); 
		ap.disabled=false;
	}

}
</script>
</head>
<body onload='Next();'>
<div id='page' data-role='page'>
<div class='header' id='header' data-role='header' data-position="fixed" style='text-align:center;'>Daily Quran</div>
<div data-role='content' id='VerseContent' class='content'>[ Content ]</div>
<div id='audiotd' class='caudiotd'><audio controls id='AudioSRC' src=''> Audio not supported in this browser</audio></div>
<div data-role='footer' id='navigation' class='footer' style='text-align:center;'>
<a href="" data-role="button" data-icon="arrow-l" onClick='Prev();' data-inline='true'>Prev</a>
<a href="" data-role="button" data-icon="arrow-r" onClick='Next();' data-inline='true'>Next</a>
<a href="" data-role="button" data-icon="forward" onClick='ToggleAutoPlay(1);' id='autoplay' data-mini='true' data-inline='true'>Auto</a>
<a href="" data-role="button" data-icon="minus" onClick='ToggleAutoPlay(0);' id='manualplay' data-mini='true' data-inline='true'>Man</a>
</div>

<div data-role='footer' id='navigation2' class='footer' data-theme='e'  style='text-align:center;'>
<table>
<tr>
<td>Sura.Verse</td>
<td><input type="text" name="sura" id="sura" value="1.1" placeholder='1.1' style='width:75px;'/></td>
<td><a href="" data-role="button" data-icon="search" onClick='GoTo();' data-inline='true'>Search</a></td>
<td><a href="http://blogya.in/qcodes/info.html" data-role="button" data-icon="info" onClick='GoTo();' data-iconpos='notext' data-inline='true'>Info</a></td>
<td><a href="http://blogya.in/qcodes/help.html" data-role="button" data-icon="help" onClick='GoTo();' data-iconpos='notext' data-inline='true'>Help</a></td>
</tr>
</table>
</div>
<div data-role='footer' id='footer' data-theme='b' class='footer' style='text-align:center;'>
BlogYa.in/qcodes
</div>

</div>


<script>
	function fixgeometry() {
      /* Some orientation changes leave the scroll position at something
       * that isn't 0,0. This is annoying for user experience. */

      scroll(0, 0);
      /* Calculate the geometry that our content area should take */
      var header = $(".header:visible");
      var footer = $(".footer:visible");
      var content = $(".content:visible");
      var viewport_height = $(window).height();
      
      var content_height = viewport_height - header.outerHeight() - footer.outerHeight();
      
      /* Trim margin/border/padding height */
      content_height -= (content.outerHeight() - content.height());
      content.height(content_height - (content_height *.30));
    }; /* fixgeometry */

    $(document).ready(function() {
    	  fixgeometry();
    	  $(window).bind("mobileinit orientationchange resize pageshow",  function(){fixgeometry();});
    	  //$(document).bind("mobileinit orientationchange resize pageshow", function(){fixgeometry();});
    	  
    	
    });
</script> 
</body>
    

</html>